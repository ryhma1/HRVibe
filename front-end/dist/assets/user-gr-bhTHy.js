import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css             */import"./logout-C_XaUAHZ.js";async function u(){const t=localStorage.getItem("token");if(!t){alert("User information not found. Please log in again.");return}const e="http://127.0.0.1:3000/api/data",a={method:"GET",headers:{Authorization:"Bearer "+t}};try{const o=await(await fetch(e,a)).json();if(o&&o.length>0&&o[0].username){window.location.href="logged-index.html";return}}catch(r){console.error("Error:",r),alert("Failed to fetch user profile data. Error details can be found in the console.")}}u();document.getElementById("user_form").addEventListener("submit",async t=>{t.preventDefault();const e=new FormData(t.target),a=e.get("username"),r=e.get("height"),o=e.get("weight"),c=e.get("age"),l=e.get("gender"),s=localStorage.getItem("token");if(console.log(s),!s){alert("User information not found. Please log in again.");return}const i={username:a,height:r,weight:o,age:c,gender:l};console.log("Request Body:",i);const g="http://127.0.0.1:3000/api/data",d={method:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},body:JSON.stringify(i)};try{const n=await fetch(g,d),h=await n.text();if(console.log("Response text:",h),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);window.location.href="logged-index.html"}catch(n){console.error("Error:",n),alert("Failed to add data. Error details can be found in the console.")}});
