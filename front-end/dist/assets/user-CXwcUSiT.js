/* empty css             */(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();async function g(){const n=localStorage.getItem("token");if(!n){alert("User information not found. Please log in again.");return}const o="http://127.0.0.1:3000/api/data",s={method:"GET",headers:{Authorization:"Bearer "+n}};try{const e=await(await fetch(o,s)).json();if(e&&e.length>0&&e[0].username){window.location.href="logged-index.html";return}}catch(r){console.error("Error:",r),alert("Failed to fetch user profile data. Error details can be found in the console.")}}g();document.getElementById("user_form").addEventListener("submit",async n=>{n.preventDefault();const o=new FormData(n.target),s=o.get("username"),r=o.get("height"),e=o.get("weight"),t=o.get("age"),a=o.get("gender"),c=localStorage.getItem("token");if(console.log(c),!c){alert("User information not found. Please log in again.");return}const l={username:s,height:r,weight:e,age:t,gender:a};console.log("Request Body:",l);const d="http://127.0.0.1:3000/api/data",u={method:"POST",headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},body:JSON.stringify(l)};try{const i=await fetch(d,u),f=await i.text();if(console.log("Response text:",f),!i.ok)throw new Error(`HTTP error! status: ${i.status}`);window.location.href="logged-index.html"}catch(i){console.error("Error:",i),alert("Failed to add data. Error details can be found in the console.")}});
