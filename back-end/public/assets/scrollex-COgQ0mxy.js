(function(h){function y(e,t,r){return typeof e=="string"&&(e.slice(-1)=="%"?e=parseInt(e.substring(0,e.length-1))/100*t:e.slice(-2)=="vh"?e=parseInt(e.substring(0,e.length-2))/100*r:e.slice(-2)=="px"&&(e=parseInt(e.substring(0,e.length-2)))),e}var p=h(window),x=1,d={};p.on("scroll",function(){var e=p.scrollTop();h.map(d,function(t){window.clearTimeout(t.timeoutId),t.timeoutId=window.setTimeout(function(){t.handler(e)},t.options.delay)})}).on("load",function(){p.trigger("scroll")}),jQuery.fn.scrollex=function(e){var t=h(this);if(this.length==0)return t;if(this.length>1){for(var r=0;r<this.length;r++)h(this[r]).scrollex(e);return t}if(t.data("_scrollexId"))return t;var a,g,u,b,c;switch(a=x++,g=jQuery.extend({top:0,bottom:0,delay:0,mode:"default",enter:null,leave:null,initialize:null,terminate:null,scroll:null},e),g.mode){case"top":u=function(i,s,o,l,n){return i>=l&&n>=i};break;case"bottom":u=function(i,s,o,l,n){return o>=l&&n>=o};break;case"middle":u=function(i,s,o,l,n){return s>=l&&n>=s};break;case"top-only":u=function(i,s,o,l,n){return l>=i&&o>=l};break;case"bottom-only":u=function(i,s,o,l,n){return o>=n&&n>=i};break;default:case"default":u=function(i,s,o,l,n){return o>=l&&n>=i}}return b=function(i){var s,o,l,n,f,v,w=this.state,m=!1,I=this.$element.offset();s=p.height(),o=i+s/2,l=i+s,n=this.$element.outerHeight(),f=I.top+y(this.options.top,n,s),v=I.top+n-y(this.options.bottom,n,s),m=this.test(i,o,l,f,v),m!=w&&(this.state=m,m?this.options.enter&&this.options.enter.apply(this.element):this.options.leave&&this.options.leave.apply(this.element)),this.options.scroll&&this.options.scroll.apply(this.element,[(o-f)/(v-f)])},c={id:a,options:g,test:u,handler:b,state:null,element:this,$element:t,timeoutId:null},d[a]=c,t.data("_scrollexId",c.id),c.options.initialize&&c.options.initialize.apply(this),t},jQuery.fn.unscrollex=function(){var e=h(this);if(this.length==0)return e;if(this.length>1){for(var t=0;t<this.length;t++)h(this[t]).unscrollex();return e}var r,a;return(r=e.data("_scrollexId"))&&(a=d[r],window.clearTimeout(a.timeoutId),delete d[r],e.removeData("_scrollexId"),a.options.terminate&&a.options.terminate.apply(this)),e}})(jQuery);
