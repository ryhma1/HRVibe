import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css             */document.addEventListener("DOMContentLoaded",()=>{document.getElementById("showSignup").addEventListener("click",()=>{const e=document.getElementById("signupSection"),o=document.getElementById("login_form");e&&o&&(e.style.display="block",o.style.display="none")}),document.getElementById("showLogin").addEventListener("click",()=>{const e=document.getElementById("login_form"),o=document.getElementById("signupSection");e&&o&&(e.style.display="block",o.style.display="none")});const c=document.querySelector(".createuser");c&&c.addEventListener("click",async e=>{e.preventDefault(),console.log("Creating user");const o="http://127.0.0.1:3000/api/users",t=document.querySelector("#signupForm"),a=t.querySelector("input[name=email]").value,i=t.querySelector("input[name=password]").value,n=t.querySelector("input[name=password-confirm]").value;if(i!==n){alert("Passwords do not match.");return}const r={email:a,password:i},u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};console.log(r);try{const s=await fetch(o,u),d=await s.json();if(s.ok)alert("User created successfully! Please create an account to Kubios Cloud for further HRVibe functionalities including measurements, analysis and history. After this, log in using the Kubious Cloud account."),window.open("https://kubioscloud.auth.eu-west-1.amazoncognito.com/login?response_type=code&client_id=1h4rmoi5s66u2cliaqcpuejgpg&redirect_uri=https://analysis.kubioscloud.com/v1/portal/login&scope=openid%20profile%20email%20phone#kubioscloud-api-reference","_blank");else throw new Error(`HTTP error! status: ${s.status}`)}catch(s){console.error("Error creating user:",s),alert("Failed to create user. Check your user information and please try again.")}});const l=document.querySelector(".loginuser");l&&l.addEventListener("click",async e=>{e.preventDefault(),console.log("Logging in user");const o="http://127.0.0.1:3000/api/auth/login",t=document.querySelector("#login_form"),a={email:t.querySelector("input[name=email]").value,password:t.querySelector("input[name=password]").value},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};try{const n=await fetch(o,i),r=await n.json();n.ok?(localStorage.setItem("token",r.token),console.log("Hei!",localStorage),window.location.href="user.html"):(console.error("Login failed:",r.error),alert("Unauthorized: email or password incorrect!"))}catch(n){console.error("Error logging in:",n),alert("Error logging in. Please try again later.")}})});
