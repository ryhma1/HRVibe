import"./main-DYt31Xt6.js";import"./jquery-5GtrIU7X.js";import"./dropotron-D-TxvmTG.js";import"./scrollex-COgQ0mxy.js";import"./browser-CdRLNVNo.js";import"./breakpoints-BGsUXCo6.js";import"./util-PiKbL46J.js";import"./main-UHvrBHL9.js";import"./logout-C_XaUAHZ.js";async function m(){const e=localStorage.getItem("token");if(!e){alert("User information not found. Please log in again.");return}const t="http://127.0.0.1:3000/api/data",a={method:"GET",headers:{Authorization:"Bearer "+e}};try{const o=await(await fetch(t,a)).json();if(o&&o.length>0&&o[0].username){window.location.href="logged-index.html";return}}catch(n){console.error("Error:",n),alert("Failed to fetch user profile data. Error details can be found in the console.")}}m();document.getElementById("user_form").addEventListener("submit",async e=>{e.preventDefault();const t=new FormData(e.target),a=t.get("username"),n=t.get("height"),o=t.get("weight"),c=t.get("age"),l=t.get("gender"),s=localStorage.getItem("token");if(console.log(s),!s){alert("User information not found. Please log in again.");return}const i={username:a,height:n,weight:o,age:c,gender:l};console.log("Request Body:",i);const g="http://127.0.0.1:3000/api/data",d={method:"POST",headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},body:JSON.stringify(i)};try{const r=await fetch(g,d),h=await r.text();if(console.log("Response text:",h),!r.ok)throw new Error(`HTTP error! status: ${r.status}`);window.location.href="logged-index.html"}catch(r){console.error("Error:",r),alert("Failed to add data. Error details can be found in the console.")}});
